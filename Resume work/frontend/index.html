<!DOCTYPE html>
<html>
<head>
    <title>Sean's Cloud Project</title>
    <style>
        body { font-family: sans-serif; text-align: center; margin-top: 50px; }
        .counter { font-size: 2em; color: #800b0b; }
    </style>
    <script>
        // This function runs immediately when the page loads
        window.addEventListener('DOMContentLoaded', (event) => {
            getVisitCount();
        });

        const getVisitCount = () => {
            let count = 30; // Default fallback
            // The API URL is relative because they are on the same domain
            fetch('/api/GetVisitorCount')
            .then(response => {
                return response.json()
            })
            .then(response => {
                console.log("Website called function API.");
                count = response.count;
                document.getElementById("counter").innerText = count;
            }).catch(function(error){
                console.log(error);
            });
            return count;
        }
    </script>
</head>
<body>
    <h1>Cloud Test Project</h1>
    <p>Welcome to my cloud project.</p>
    
    <p>[Visitor Count]: <span id="counter" class="counter">Loading...</span></p>
</body>
</html>